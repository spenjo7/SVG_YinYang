<!DOCTYPE html>
<html>
<head>
<title>Jon Spencer SVG YinYang</title>
<style>
	#mySvg{
		transform-origin: center;
		position: absolute;
		left: 25%;
		top: 25%;
	}
	
	#yin_yang{
		transform-origin: 64px 64px;
	}
</style>
</head>
<body>
<svg id="mySvg" width="200" height="200">
	 <defs>
		<clipPath id="h_cir_left">
			<rect X="4" Y="4" width="60" height="120" />
		</clipPath>
		<clipPath id="h_cir_right">
			<rect X="64" Y="4" width="60" height="120" />
		</clipPath>
		</defs>
		<rect width="128" height="128" X="0" Y="0" fill="rgba(128, 126, 128, .5)" ry="4"/>
	<g id="yin_yang">
		<circle CX="64" CY="64" r="60" fill="white" clip-path="url(#h_cir_left)" />
		<circle CX="64" CY="64" r="60" fill="black" clip-path="url(#h_cir_right)" />
		<circle CX="64" CY="34" r="30" fill="white"/>
		<circle CX="64" CY="34" r="15" fill="black"/>
		<circle CX="64" CY="94" r="30" fill="black"/>
		<circle CX="64" CY="94" r="15" fill="white"/>
	</g>
</svg>
<script>
const YinYang = document.getElementById('yin_yang');

let getCurrentRotation = (element) => {
	let current_style = window
			.getComputedStyle( element, null)
			.getPropertyValue("transform")
			.split(/[\s\(\),]+/g)
			.slice(1,3);
	
	[a,b] = current_style;	
		// if the item doesn't have a rotation value, it returns 'undefined'
	return Math.round(Math.atan2(b, a) * (180/Math.PI));
}

let rotate = (element, angle = 0) => {
	element.setAttribute("transform", `rotate(${angle})` );
}

setInterval(()=>{
	let angle = getCurrentRotation(YinYang);
	angle = (!angle || angle > 359 )? 1 : angle +1; // handle complete rotation and no prior rotation
	rotate(YinYang, angle);	
},24);
</script>
</body>
</html>